name: "Extract directly to toolcache"
description: "Extract the CodeQL bundle directly into the toolcache"
versions:
  - linked
operatingSystems:
  - macos
  - ubuntu
env:
  CODEQL_ACTION_EXTRACT_TOOLCACHE: true
  CODEQL_ACTION_ZSTD_BUNDLE: true
steps:
  - name: Remove CodeQL from toolcache
    uses: actions/github-script@v7
    with:
      script: |
        const fs = require('fs');
        const path = require('path');
        const codeqlPath = path.join(process.env['RUNNER_TOOL_CACHE'], 'CodeQL');
        fs.rmdirSync(codeqlPath, { recursive: true });
  - id: init
    uses: ./../action/init
    with:
      languages: javascript
      tools: ${{ steps.prepare-test.outputs.tools-url }}
  - uses: ./../action/analyze
    with:
      output: ${{ runner.temp }}/results
      upload-database: false
